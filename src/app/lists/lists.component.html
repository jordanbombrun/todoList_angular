<div class="row mt-3">
  <div class="col-12 text-center">
    <button class="btn btn-warning" (click)="getData()">Afficher les listes</button>
  </div>

  <div *ngIf="APIObject; else errorDiv" class="offset-2 col-8">
    <h2 *ngIf="APIObject.utilisateur" class="text-center">Les listes de <b>{{APIObject.utilisateur}}</b></h2>
    <!--listes-->
    <ul class="list-group list-unstyled" *ngFor="let list of APIObject.todoListes; let indexList=index">
      <li class="list-group-item my-3 list{{indexList}}">
        <b id="list{{indexList}}">{{list.name}} :</b>
        <button class="fas fa-trash mx-2" (click)="deleteList(indexList)"></button>

        <ul class="list-group list-unstyled my-3" *ngFor="let listItem of list.elements; let indexItem=index">
          <li class="list-group-item">
            <span id="item{{indexItem}}">{{listItem}}</span>
            <button class="fas fa-edit mx-2" (click)="editListItem(indexList, indexItem )"></button>
            <!--edit the listItem-->
            <button class="fas fa-trash mx-2" (click)="deleteListItem(indexList, indexItem)"></button>
            <!--delete the listItem-->
          </li><!-- fin de l'item courant-->
        </ul>

        <div><!-- formulaire création d'un nouvel item-->
          <input type="text" placeholder="Nouvelle tâche" [(ngModel)]="newListItem">
          <button class="fas fa-plus-circle mx-2" (click)="createListItem()"></button>
        </div>

      </li> <!-- fin de la liste courante-->
    </ul>

    <div> <!-- ajout nouvelle liste -->
      <h2 class="text-center">Ajouter votre liste</h2>

      <label for="newListname">Nom :
        <input type="text" [(ngModel)]="newList.name" id="newListname">
      </label>
      <ul class="list-group">
        <li class="list-group-item">Item : <input type="text"
                                                  [(ngModel)]="newList.elements[0]"
                                                  class="newListItem"
        ></li>
        <li class="list-group-item">Item : <input type="text" [(ngModel)]="newList.elements[1]" class="newListItem">
        </li>
      </ul>
      <button class="btn btn-success" (click)="addList()">Ajouter</button>
    </div>
  </div>

  <ng-template #errorDiv><!--message d'erreur-->
    <div class="offset-2 col-8 my-3">
      <p class="text-center text-warning bg-dark p-3">Vous n'êtes pas connecté. Authentifiez vous pour afficher vos todo
        listes !</p>
    </div>
  </ng-template>
</div>
